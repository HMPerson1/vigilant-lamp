<div class="content fill-screen" role="main" style="width: 100%; padding: 4px; display: flex; overflow: hidden;">
  <div style="flex: 4; display: flex; flex-direction: column;" (wheel)="$event.preventDefault()">
    <app-audio-waveform class="groove-border" [audioData]="audioData" [(timeMin)]="vizTimeMin"
      [(timeMax)]="vizTimeMax"></app-audio-waveform>
    <app-audio-spectrogram class="groove-border" style="flex: 1;" [audioData]="audioData" [(timeMin)]="vizTimeMin"
      [(timeMax)]="vizTimeMax" [(pitchMin)]="specPitchMin" [(pitchMax)]="specPitchMax" [specDbMin]="specDbMin"
      [specDbMax]="specDbMax" [fftLgWindowSize]="specLgWindowSize" [timeStep]="specTimeStep"
      [fftLgExtraPad]="specLgExtraPad"></app-audio-spectrogram>
  </div>
  <div class="groove-border settings-panel" style="flex: 1; padding: 4px 8px; display: flex; flex-direction: column;">
    <div style="display: flex; align-items: center;">
      <button mat-raised-button color="primary" (click)="fileInput.click()">Set Music</button>
      <input #fileInput type="file" hidden (change)="onFileSelected($event)" accept="audio/wav">
      <div style="flex: 1; padding: 0 16px; display: flex;">
        <button mat-icon-button aria-label="Play" (click)="startPlayback()" [disabled]="!audioFile">
          <mat-icon>play_arrow</mat-icon>
        </button>
        <button mat-icon-button aria-label="Stop" (click)="stopPlayback()" [disabled]="!audioBufSrcNode">
          <mat-icon>stop</mat-icon>
        </button>
      </div>
    </div>
    <div style="padding: 16px 0; display: flex; flex-direction: column;">
      <label>Spectral Power Scale</label>
      <mat-slider min="-100" max="10" step="1" style="width: auto;">
        <input matSliderStartThumb [(value)]="specDbMin">
        <input matSliderEndThumb [(value)]="specDbMax">
      </mat-slider>
      <label>Time vs. Frequency Resolution</label>
      <mat-slider min="10" max="16" step="1" style="width: auto;">
        <input matSliderThumb [(value)]="specLgWindowSize">
      </mat-slider>
      <label>Time Sampling</label>
      <mat-slider min="0" max="5" step="1" style="width: auto;">
        <input matSliderThumb [(value)]="specTimeStepInput">
      </mat-slider>
      <label>Freqency Sampling</label>
      <mat-slider min="-1" max="3" step="1" style="width: auto;">
        <input matSliderThumb [(value)]="specLgExtraPad">
      </mat-slider>
    </div>
    <div> Cross-Origin Isolated: {{ coi }} </div>
  </div>
</div>
